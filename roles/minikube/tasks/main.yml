---
- name: installing libvirt and KVM
  dnf:
    name:
    - libvirt-daemon-kvm 
    - qemu-kvm
    state: present

- name: adding user to "libvirt" group
  user:
    name: prometherion
    groups: libvirt
    append: yes

- name: ensure group "libvirt" exists
  group:
    name: libvirt
    state: present


- name: download Docker Machine KVM2 driver
  get_url:
    url: https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-kvm2
    dest: /tmp/docker-machine-driver-kvm2

- name: installing Docker Machine KVM2 driver
  shell: install /tmp/docker-machine-driver-kvm2 /usr/local/bin/

- name: download Minikube
  get_url:
    url: https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
    dest: /usr/local/bin/minikube

- name: setting permissions for Minikube
  file:
    path: /usr/local/bin/minikube
    mode: "+x"

- name: download kubectl
  get_url:
    url: https://storage.googleapis.com/kubernetes-release/release/v1.13.2/bin/linux/amd64/kubectl 
    dest: /usr/local/bin/kubectl

- name: setting permissions for kubectl
  file:
    path: /usr/local/bin/kubectl
    mode: "+x"
